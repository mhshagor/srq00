<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Global Reusable Carousel</title>
    <style>
      /* Basic styles shared for all carousels */
      .carousel {
        position: relative;
        width: 600px;
        margin: 30px auto;
        overflow: hidden;
        border: 2px solid #000;
        border-radius: 8px;
        background: #fff;
        user-select: none;
        outline: none;
      }
      .slides {
        display: flex;
        transition: transform 0.5s ease-in-out;
        width: 100%;
      }
      .slide {
        min-width: 100%;
        position: relative;
      }
      .slide img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        display: block;
        border-radius: 8px 8px 0 0;
        user-select: none;
        pointer-events: none;
        -webkit-user-drag: none;
        -moz-user-drag: none;
        -ms-user-drag: none;
        user-drag: none;
      }
      /* Prev/Next Buttons */
      .nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background-color: rgba(255, 255, 255, 0.8);
        border: 2px solid #424242;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        font-size: 24px;
        color: #000;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
        transition: background-color 0.3s ease;
        z-index: 10;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
      }
      .nav-btn:hover,
      .nav-btn:focus {
        background-color: #e1e1e1;
        outline: none;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
      }
      .prev {
        left: 15px;
      }
      .next {
        right: 15px;
      }
      /* Stylish Dots */
      .dots {
        display: flex;
        justify-content: center;
        margin: 10px 0 20px 0;
        gap: 14px;
        position: absolute;
        bottom: 15px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 20;
      }
      .dot {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background-color: #ccc;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.3s ease,
          box-shadow 0.3s ease;
        border: 2px solid transparent;
      }
      .dot:hover {
        background-color: #888;
        transform: scale(1.1);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }
      .dot.active {
        background-color: #424242;
        outline: 2px solid #424242;
        outline-offset: 2px;
      }
    </style>
  </head>
  <body>
    <!-- Example 1 -->
    <div class="carousel" tabindex="0" aria-label="Image Carousel 1">
      <div class="slides">
        <div class="slide" aria-hidden="false">
          <img src="../images/project (4).jpg" alt="Slide 1" />
        </div>
        <div class="slide" aria-hidden="true">
          <img src="../images/project (3).jpg" alt="Slide 2" />
        </div>
        <div class="slide" aria-hidden="true">
          <img src="../images/project (2).jpg" alt="Slide 3" />
        </div>
        <div class="slide" aria-hidden="true">
          <img src="../images/project (1).jpg" alt="Slide 4" />
        </div>
      </div>
    </div>

    <!-- Example 2 (smaller carousel for demo) -->
    <div
      class="carousel"
      tabindex="0"
      aria-label="Image Carousel 2"
      style="width: 400px"
      data-dots="false"
    >
      <div class="slides">
        <div class="slide" aria-hidden="false">
          <img src="../images/project (4).jpg" alt="Slide A" />
        </div>
        <div class="slide" aria-hidden="true">
          <img src="../images/project (3).jpg" alt="Slide B" />
        </div>
        <div class="slide" aria-hidden="true">
          <img src="../images/project (2).jpg" alt="Slide C" />
        </div>
      </div>
    </div>

    <!-- Example 3 (smaller carousel for demo) -->
    <div
      class="carousel"
      tabindex="0"
      aria-label="Image Carousel 3"
      style="width: 400px"
      data-dots="false"
      data-controls="false"
    >
      <div class="slides">
        <div class="slide" aria-hidden="false">
          <img src="../images/project (4).jpg" alt="Slide A" />
        </div>
        <div class="slide" aria-hidden="true">
          <img src="../images/project (3).jpg" alt="Slide B" />
        </div>
        <div class="slide" aria-hidden="true">
          <img src="../images/project (2).jpg" alt="Slide C" />
        </div>
      </div>
    </div>

    <script>
      class Carousel {
        constructor(carouselElement) {
          this.carousel = carouselElement;
          this.slides = this.carousel.querySelector('.slides');
          this.slideElems = this.carousel.querySelectorAll('.slide');
          this.slideCount = this.slideElems.length;
          this.currentIndex = 0;
          this.autoSlideInterval = null;
          this.AUTO_SLIDE_DELAY = 4000;
      
          this.showDots = this.carousel.getAttribute('data-dots') !== 'false';
          this.showControls = this.carousel.getAttribute('data-controls') !== 'false';
      
          if (this.showControls) this.createControls();
          if (this.showDots) this.createDots();
      
          this.updateCarousel();
          this.startAutoSlide();
          this.addEventListeners();
      
          // Drag-related vars
          this.isDragging = false;
          this.startPos = 0;
          this.currentTranslate = 0;
          this.prevTranslate = 0;
          this.animationID = 0;
      
          this.addDragListeners();
        }
      
        createControls() {
          this.prevBtn = document.createElement('button');
          this.prevBtn.className = 'nav-btn prev';
          this.prevBtn.setAttribute('aria-label', 'Previous Slide');
          this.prevBtn.innerHTML = '&#10094;';
          this.carousel.appendChild(this.prevBtn);
      
          this.nextBtn = document.createElement('button');
          this.nextBtn.className = 'nav-btn next';
          this.nextBtn.setAttribute('aria-label', 'Next Slide');
          this.nextBtn.innerHTML = '&#10095;';
          this.carousel.appendChild(this.nextBtn);
        }
      
        createDots() {
          this.dotsContainer = document.createElement('div');
          this.dotsContainer.className = 'dots';
          this.dotsContainer.setAttribute('role', 'tablist');
          this.dotsContainer.setAttribute('aria-label', 'Slide navigation');
          this.carousel.appendChild(this.dotsContainer);
      
          this.dots = [];
          for (let i = 0; i < this.slideCount; i++) {
            const dot = document.createElement('button');
            dot.classList.add('dot');
            dot.setAttribute('role', 'tab');
            dot.setAttribute('aria-selected', i === 0 ? 'true' : 'false');
            dot.setAttribute('aria-controls', `slide${i}`);
            dot.id = `dot${i}`;
            if (i === 0) dot.classList.add('active');
            this.dotsContainer.appendChild(dot);
      
            dot.addEventListener('click', () => {
              this.currentIndex = i;
              this.updateCarousel();
              this.resetAutoSlide();
            });
      
            this.dots.push(dot);
          }
        }
      
        updateCarousel() {
          if (!this.isDragging) {
            this.slides.style.transition = 'transform 0.5s ease-in-out';
            this.slides.style.transform = `translateX(-${this.currentIndex * this.carousel.offsetWidth}px)`;
          }
          this.updateDots();
          this.updateAria();
          this.prevTranslate = -this.currentIndex * this.carousel.offsetWidth;
          this.currentTranslate = this.prevTranslate;
        }
      
        updateDots() {
          if (!this.dots) return;
          this.dots.forEach((dot, i) => {
            dot.classList.toggle('active', i === this.currentIndex);
            dot.setAttribute('aria-selected', i === this.currentIndex ? 'true' : 'false');
          });
        }
      
        updateAria() {
          this.slideElems.forEach((slide, i) => {
            slide.setAttribute('aria-hidden', i === this.currentIndex ? 'false' : 'true');
          });
        }
      
        prevSlide() {
          this.currentIndex = (this.currentIndex === 0) ? this.slideCount - 1 : this.currentIndex - 1;
          this.updateCarousel();
          this.resetAutoSlide();
        }
      
        nextSlide() {
          this.currentIndex = (this.currentIndex === this.slideCount - 1) ? 0 : this.currentIndex + 1;
          this.updateCarousel();
          this.resetAutoSlide();
        }
      
        startAutoSlide() {
          if (this.autoSlideInterval) return;
          this.autoSlideInterval = setInterval(() => {
            this.nextSlide();
          }, this.AUTO_SLIDE_DELAY);
        }
      
        stopAutoSlide() {
          if (this.autoSlideInterval) {
            clearInterval(this.autoSlideInterval);
            this.autoSlideInterval = null;
          }
        }
      
        resetAutoSlide() {
          this.stopAutoSlide();
          this.startAutoSlide();
        }
      
        addEventListeners() {
          if (this.showControls && this.prevBtn && this.nextBtn) {
            this.prevBtn.addEventListener('click', () => this.prevSlide());
            this.nextBtn.addEventListener('click', () => this.nextSlide());
          }
      
          this.carousel.addEventListener('mouseenter', () => this.stopAutoSlide());
          this.carousel.addEventListener('mouseleave', () => this.startAutoSlide());
      
          this.carousel.addEventListener('keydown', e => {
            if (e.key === 'ArrowLeft') this.prevSlide();
            else if (e.key === 'ArrowRight') this.nextSlide();
          });
        }
      
        addDragListeners() {
          // Mouse events
          this.slides.addEventListener('mousedown', this.touchStart.bind(this));
          this.slides.addEventListener('mouseup', this.touchEnd.bind(this));
          this.slides.addEventListener('mouseleave', this.touchEnd.bind(this));
          this.slides.addEventListener('mousemove', this.touchMove.bind(this));
      
          // Touch events
          this.slides.addEventListener('touchstart', this.touchStart.bind(this));
          this.slides.addEventListener('touchend', this.touchEnd.bind(this));
          this.slides.addEventListener('touchcancel', this.touchEnd.bind(this));
          this.slides.addEventListener('touchmove', this.touchMove.bind(this));
        }
      
        touchStart(event) {
          this.isDragging = true;
          this.startPos = this.getPositionX(event);
          this.slides.style.transition = 'none';
          this.stopAutoSlide();
      
          this.animationID = requestAnimationFrame(this.animation.bind(this));
        }
      
        touchMove(event) {
          if (!this.isDragging) return;
          const currentPosition = this.getPositionX(event);
          this.currentTranslate = this.prevTranslate + currentPosition - this.startPos;
        }
      
        touchEnd() {
          if (!this.isDragging) return;
          this.isDragging = false;
          cancelAnimationFrame(this.animationID);
      
          const movedBy = this.currentTranslate - this.prevTranslate;
      
          // If drag is significant enough, move slides
          if (movedBy < -this.carousel.offsetWidth / 4 && this.currentIndex < this.slideCount - 1) {
            this.currentIndex += 1;
          } else if (movedBy > this.carousel.offsetWidth / 4 && this.currentIndex > 0) {
            this.currentIndex -= 1;
          }
      
          this.slides.style.transition = 'transform 0.5s ease-in-out';
          this.updateCarousel();
          this.resetAutoSlide();
        }
      
        getPositionX(event) {
          return event.type.includes('mouse') ? event.pageX : event.touches[0].clientX;
        }
      
        animation() {
          this.setSlidePosition();
          if (this.isDragging) requestAnimationFrame(this.animation.bind(this));
        }
      
        setSlidePosition() {
          this.slides.style.transform = `translateX(${this.currentTranslate}px)`;
        }
      }
      
      document.querySelectorAll('.carousel').forEach(carouselElem => {
        new Carousel(carouselElem);
      });
      </script>
  </body>
</html>
